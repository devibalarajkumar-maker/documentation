"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[765],{492:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"rubik-pi-3-user-manual/lvgl","title":"5. LVGL User Guide","description":"","source":"@site/docs/rubik-pi-3-user-manual/5.lvgl.md","sourceDirName":"rubik-pi-3-user-manual","slug":"/rubik-pi-3-user-manual/lvgl","permalink":"/rubik-pi-3/en/docs/rubik-pi-3-user-manual/lvgl","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":""},"sidebar":"tutorialSidebar","previous":{"title":"4. Qualcomm IM SDK","permalink":"/rubik-pi-3/en/docs/rubik-pi-3-user-manual/qim"},"next":{"title":"6. QT5 User Guide","permalink":"/rubik-pi-3/en/docs/rubik-pi-3-user-manual/qt5"}}');var l=r(4848),s=r(8453);r(1470),r(9365);const i={sidebar_position:5,description:""},a="5. LVGL User Guide",o={},c=[];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"5-lvgl-user-guide",children:"5. LVGL User Guide"})}),"\n",(0,l.jsxs)(n.p,{children:["Light and Versatile Graphics Library (LVGL) is an open-source lightweight graphics library. The following example illustrates how to port LVGL9.2 to the Weston desktop. After porting, the library can be downloaded at ",(0,l.jsx)(n.a,{href:"https://github.com/rubikpi-ai/lvgl",children:"https://github.com/rubikpi-ai/lvgl"}),". For more information about LVGL, visit ",(0,l.jsx)(n.a,{href:"https://lvgl.io/",children:"https://lvgl.io/"}),"."]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Clone the required code base:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Shell",metastring:"showLineNumbers  ",children:"    git clone -b release/v9.2 https://github.com/lvgl/lvgl.git  \r\n    git clone https://github.com/lvgl/lv_port_pc_vscode.git\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsxs)(n.li,{children:["Copy lvgl to the root directory of ",(0,l.jsx)(n.em,{children:"lv_port_pc_vscode"}),", replace the ",(0,l.jsx)(n.em,{children:"lv_conf.h"})," configuration file, and go to ",(0,l.jsx)(n.em,{children:"main/src"})," to create a soft link."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Shell",metastring:"showLineNumbers  ",children:"    cd lv_port_pc_vscode  \r\n    cp ../lvgl . -r  \r\n    cp lvgl/lv_conf_template.h lv_conf.h  \r\n    cd main/src  \r\n    ln -sf ../../lvgl\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsxs)(n.li,{children:["Modify ",(0,l.jsx)(n.em,{children:"lv_conf.h"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Enable lv_conf.h."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers  ",children:'    /* clang-format off */  \r\n    #if 1 /*Set it to "1" to enable content*/\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Modify the color depth:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers  ",children:"    #define LV_COLOR_DEPTH 32\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Define LV_MEM_SIZE:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers  ",children:"    #define LV_MEM_SIZE (20U * 1024U * 1024U)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Define LV_USE_WAYLAND:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers  ",children:"    #define LV_USE_WAYLAND          1\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Define LV_WAYLAND_WL_SHELL:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers  ",children:"    #define LV_WAYLAND_WL_SHELL             1\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Define LV_USE_LINUX_DRM:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers  ",children:"    #define LV_USE_LINUX_DRM        1\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Enable the demo:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers  ",children:"    #define LV_USE_DEMO_WIDGETS 1\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"4",children:["\n",(0,l.jsxs)(n.li,{children:["Modify ",(0,l.jsx)(n.em,{children:"CMakeLists.txt"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Comment out SDL2 library:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:"showLineNumbers  ",children:"    # Find and include SDL2 library  \r\n    # find_package(SDL2 REQUIRED)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Add the path of the header file and modify the path according to the actual situation. As shown in the following code, ",(0,l.jsx)(n.em,{children:"/home/zhy/QCOM/sdk"}),' is the installation path of the cross-compilation tool. For details, refer to "1.12.2. Compile code".']}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:"showLineNumbers  ",children:"    target_include_directories(lvgl PUBLIC /home/zhy/QCOM/sdk/sysroots/armv8-2a-qcom-linux/usr/include/drm)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Comment out the following content:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:"showLineNumbers  ",children:'    # Remove ARM-specific compile and linker options  \r\n    # set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -march=native")  \r\n    # set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -march=native")\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Set the link library. Replace the original target_link_libraries:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:"showLineNumbers  ",children:"    # Define LVGL configuration as a simple include  \r\n    target_compile_definitions(main PRIVATE LV_CONF_INCLUDE_SIMPLE)  \r\n    target_link_libraries(main lvgl lvgl::examples lvgl::demos lvgl::thorvg m pthread rt drmfs drm_etnaviv drm_nouveau drm_omap drmtime drm drmutils sdedrm xkbcommon wayland-client wayland-cursor wayland-egl EGL GLESv2)\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"5",children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Configure the cross-compilation environment."}),"\n",(0,l.jsx)(n.p,{children:'For details, refer to "1.11.2.Install cross-compilation tools".'}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Shell",metastring:"showLineNumbers  ",children:"source <your toolchains directory>/environment-setup-armv8-2a-qcom-linux\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Modify the hal_init function in ",(0,l.jsx)(n.em,{children:"lv_port_pc_vscode/main/src/main.c"}),"."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:'/**\r\n * Initialize the Hardware Abstraction Layer (HAL) for the LVGL graphics\r\n * library\r\n */\r\nstatic lv_display_t * hal_init(int32_t w, int32_t h)\r\n{\r\n        lv_disp_t * disp;\r\n        lv_group_set_default(lv_group_create());\r\n\r\n        lv_group_set_default(lv_group_create());\r\n        disp = lv_wayland_window_create(w, h, "Window Title", NULL);\r\n    // lv_wayland_window_set_fullscreen(disp, false);\r\n\r\n        lv_indev_t *kb = lv_wayland_get_keyboard(disp);\r\n        lv_indev_set_display(kb, disp);\r\n        lv_indev_set_group(kb, lv_group_get_default());\r\n\r\n        lv_display_set_default(disp);\r\n\r\n        return disp;\r\n}\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"6",children:["\n",(0,l.jsx)(n.li,{children:"In the main function of lv_port_pc_vscode/nvim main/src/main.c, change lv_timer_handler called in the while loop to lv_wayland_timer_handler."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:"while(1) {\r\n  /* Periodically call the lv_task handler.\r\n   * It could be done in a timer interrupt or an OS task too.*/\r\n  lv_wayland_timer_handler();\r\n  usleep(5 * 1000);\r\n}\r\n\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"7",children:["\n",(0,l.jsx)(n.li,{children:"Start compilation."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Shell",metastring:"showLineNumbers  ",children:"    cd lv_port_pc_vscode  \r\n    mkidr build  \r\n    cd build  \r\n    cmake ..  \r\n    make\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"8",children:["\n",(0,l.jsx)(n.li,{children:"Transfer the compilation artifact to RUBIK Pi 3. The following is an ADB transfer example:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Shell",metastring:"showLineNumbers  ",children:"    cd lv_port_pc_vscode/bin  \r\n    adb push main /opt\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"9",children:["\n",(0,l.jsx)(n.li,{children:"Connect the HDMI cable, mouse, and keyboard. Run the following commands in the Weston terminal to execute the LVGL program. Use the mouse and keyboard to perform operations in the user interface."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-Shell",metastring:"showLineNumbers  ",children:"    cd /opt  \r\n    ./main\n"})}),"\n",(0,l.jsx)(n.p,{children:"The porting result:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:r(7689).A+"",width:"960",height:"1280"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},9365:(e,n,r)=>{r.d(n,{A:()=>i});r(6540);var t=r(4164);const l={tabItem:"tabItem_Ymn6"};var s=r(4848);function i(e){let{children:n,hidden:r,className:i}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,t.A)(l.tabItem,i),hidden:r,children:n})}},1470:(e,n,r)=>{r.d(n,{A:()=>L});var t=r(6540),l=r(4164),s=r(3104),i=r(6347),a=r(205),o=r(7485),c=r(1682),d=r(679);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:l}}=e;return{value:n,label:r,attributes:t,default:l}}))}(r);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function m(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:r}=e;const l=(0,i.W6)(),s=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,o.aZ)(s),(0,t.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(l.location.search);n.set(s,e),l.replace({...l.location,search:n.toString()})}),[s,l])]}function g(e){const{defaultValue:n,queryString:r=!1,groupId:l}=e,s=h(e),[i,o]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=r.find((e=>e.default))??r[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[c,u]=p({queryString:r,groupId:l}),[g,f]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,s]=(0,d.Dv)(r);return[l,(0,t.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:l}),_=(()=>{const e=c??g;return m({value:e,tabValues:s})?e:null})();(0,a.A)((()=>{_&&o(_)}),[_]);return{selectedValue:i,selectValue:(0,t.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),f(e)}),[u,f,s]),tabValues:s}}var f=r(2303);const _={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=r(4848);function x(e){let{className:n,block:r,selectedValue:t,selectValue:i,tabValues:a}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const n=e.currentTarget,r=o.indexOf(n),l=a[r].value;l!==t&&(c(n),i(l))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=o.indexOf(e.currentTarget)+1;n=o[r]??o[0];break}case"ArrowLeft":{const r=o.indexOf(e.currentTarget)-1;n=o[r]??o[o.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":r},n),children:a.map((e=>{let{value:n,label:r,attributes:s}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>o.push(e),onKeyDown:u,onClick:d,...s,className:(0,l.A)("tabs__item",_.tabItem,s?.className,{"tabs__item--active":t===n}),children:r??n},n)}))})}function v(e){let{lazy:n,children:r,selectedValue:s}=e;const i=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function j(e){const n=g(e);return(0,b.jsxs)("div",{className:(0,l.A)("tabs-container",_.tabList),children:[(0,b.jsx)(x,{...n,...e}),(0,b.jsx)(v,{...n,...e})]})}function L(e){const n=(0,f.A)();return(0,b.jsx)(j,{...e,children:u(e.children)},String(n))}},7689:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/62e9e4481da8869f5bcc36468407e315-3ec7a76f10874e1c129a76dabc9446fe.png"},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>a});var t=r(6540);const l={},s=t.createContext(l);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);