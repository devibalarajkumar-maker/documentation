"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[765],{492:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"rubik-pi-3-user-manual/lvgl","title":"5. LVGL\u4f7f\u7528\u6307\u5357","description":"","source":"@site/docs/rubik-pi-3-user-manual/5.lvgl.md","sourceDirName":"rubik-pi-3-user-manual","slug":"/rubik-pi-3-user-manual/lvgl","permalink":"/rubik-pi-3/cn/docs/rubik-pi-3-user-manual/lvgl","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":""},"sidebar":"tutorialSidebar","previous":{"title":"4. Qualcomm IM SDK","permalink":"/rubik-pi-3/cn/docs/rubik-pi-3-user-manual/qim"},"next":{"title":"6. QT5 \u4f7f\u7528\u6307\u5357","permalink":"/rubik-pi-3/cn/docs/rubik-pi-3-user-manual/qt5"}}');var l=s(4848),r=s(8453);const a={sidebar_position:5,description:""},c="5. LVGL\u4f7f\u7528\u6307\u5357",t={},d=[];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"5-lvgl\u4f7f\u7528\u6307\u5357",children:"5. LVGL\u4f7f\u7528\u6307\u5357"})}),"\n",(0,l.jsx)(n.p,{children:"LVGL \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u8f7b\u91cf\u7ea7\u56fe\u5f62\u5e93\uff0c\u4e0b\u9762\u4ee5 LVGL9.2 \u4e3a\u4f8b\uff0c\u8bf4\u660e\u4e00\u79cd\u5c06\u5176\u79fb\u690d\u5230 Weston \u684c\u9762\u7684\u65b9\u6cd5\u3002"}),"\n",(0,l.jsxs)(n.p,{children:["\u5b8c\u6574\u5de5\u7a0b\uff0c\u53ef\u8bbf\u95ee ",(0,l.jsx)(n.a,{href:"https://github.com/rubikpi-ai/lvgl",children:"https://github.com/rubikpi-ai/lvgl"})," \u4e0b\u8f7d\u3002"]}),"\n",(0,l.jsxs)(n.p,{children:["\u5173\u4e8e LVGL \u7684\u66f4\u591a\u4fe1\u606f\uff0c\u53ef\u8bbf\u95ee ",(0,l.jsx)(n.a,{href:"https://lvgl.io/",children:"https://lvgl.io/"})," \u67e5\u770b\u3002"]}),"\n",(0,l.jsx)(n.p,{children:"1.\u514b\u9686\u9700\u8981\u7684\u4ee3\u7801\u5e93\uff1a"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",metastring:"showLineNumbers",children:"git clone -b release/v9.2 https://github.com/lvgl/lvgl.git\ngit clone https://github.com/lvgl/lv_port_pc_vscode.git\n"})}),"\n",(0,l.jsxs)(n.p,{children:["2.\u5c06lvgl\u62f7\u8d1d\u5230l",(0,l.jsx)(n.em,{children:"v_port_pc_vscode"}),"\u7684\u6839\u76ee\u5f55\u4e0b\uff0c\u66ff\u6362",(0,l.jsx)(n.em,{children:"lv_conf.h"}),"\u914d\u7f6e\u6587\u4ef6\uff0c\u540c\u65f6\u5230 ",(0,l.jsx)(n.em,{children:"main/src"})," \u4e0b\u521b\u5efa\u8f6f\u94fe\u63a5\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",metastring:"showLineNumbers",children:"cd lv_port_pc_vscode\ncp ../lvgl . -r\ncp lvgl/lv_conf_template.h lv_conf.h\ncd main/src\nln -sf ../../lvgl\n"})}),"\n",(0,l.jsxs)(n.p,{children:["3.\u4fee\u6539 ",(0,l.jsx)(n.em,{children:"lv_conf.h"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4f7f\u80fd",(0,l.jsx)(n.em,{children:"lv_conf.h"}),"\uff1a"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:'/* clang-format off */\n#if 1 /*Set it to "1" to enable content*/\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4fee\u6539\u8272\u6df1\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:"#define LV_COLOR_DEPTH 32\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u589e\u52a0 LV_MEM_SIZE\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:"#define LV_MEM_SIZE (20U * 1024U * 1024U)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8bbe\u7f6e LV_USE_WAYLAND\uff1a"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:"#define LV_USE_WAYLAND          1\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8bbe\u7f6e LV_WAYLAND_WL_SHELL:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:"#define LV_WAYLAND_WL_SHELL             1\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8bbe\u7f6e LV_USE_LINUX_DRM:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:"#define LV_USE_LINUX_DRM        1\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u4f7f\u80fdDEMO:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:"#define LV_USE_DEMO_WIDGETS 1\n"})}),"\n",(0,l.jsxs)(n.p,{children:["4.\u4fee\u6539",(0,l.jsx)(n.em,{children:"CMakeLists.txt"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6ce8\u91ca\u6389 SDL2\u5e93:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:"showLineNumbers",children:"# Find and include SDL2 library\n# find_package(SDL2 REQUIRED)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u589e\u52a0\u5934\u6587\u4ef6\u8def\u5f84\uff0c\u6309\u5b9e\u9645\u60c5\u51b5\u5bf9\u8def\u5f84\u8fdb\u884c\u4fee\u6539\uff0c\u5982\u4e0b ",(0,l.jsx)(n.em,{children:"/home/zhy/QCOM/sdk"})," \u4e3a\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u7684\u5b89\u88c5\u8def\u5f84\uff0c\u5177\u4f53\u53ef\u53c2\u8003\u5feb\u901f\u5f00\u59cb->Linux kernel->\u4ee3\u7801\u7f16\u8bd1\u90e8\u5206:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:"showLineNumbers",children:"target_include_directories(lvgl PUBLIC /home/zhy/QCOM/sdk/sysroots/armv8-2a-qcom-linux/usr/include/drm)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u6ce8\u91ca\u6389\u5982\u4e0b\u5185\u5bb9:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:"showLineNumbers",children:'# Remove ARM-specific compile and linker options\n# set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -march=native")\n# set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -march=native")\n'})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u8bbe\u7f6e\u94fe\u63a5\u7684\u5e93\uff0c\u5982\u4e0b\u5c06\u539f target_link_libraries \u90e8\u5206\u8fdb\u884c\u66ff\u6362:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-CMake",metastring:"showLineNumbers",children:"# Define LVGL configuration as a simple include\ntarget_compile_definitions(main PRIVATE LV_CONF_INCLUDE_SIMPLE)\ntarget_link_libraries(main lvgl lvgl::examples lvgl::demos lvgl::thorvg m pthread rt drmfs drm_etnaviv drm_nouveau drm_omap drmtime drm drmutils sdedrm xkbcommon wayland-client wayland-cursor wayland-egl EGL GLESv2)\n"})}),"\n",(0,l.jsx)(n.p,{children:"5.\u8bbe\u7f6e\u4ea4\u53c9\u7f16\u8bd1\u73af\u5883"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5177\u4f53\u53ef\u53c2\u8003  1.11.2 \u5b89\u88c5\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u5c0f\u8282:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",metastring:"showLineNumbers",children:"source <your toolchains directory>/environment-setup-armv8-2a-qcom-linux\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u4fee\u6539 ",(0,l.jsx)(n.em,{children:"lv_port_pc_vscode/main/src/main.c"})," \u4e2d\u7684 hal_init\u51fd\u6570:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:'/**\n * Initialize the Hardware Abstraction Layer (HAL) for the LVGL graphics\n * library\n */\nstatic lv_display_t * hal_init(int32_t w, int32_t h)\n{\n        lv_disp_t * disp;\n        lv_group_set_default(lv_group_create());\n\n        lv_group_set_default(lv_group_create());\n        disp = lv_wayland_window_create(w, h, "Window Title", NULL);\n    // lv_wayland_window_set_fullscreen(disp, false);\n\n        lv_indev_t *kb = lv_wayland_get_keyboard(disp);\n        lv_indev_set_display(kb, disp);\n        lv_indev_set_group(kb, lv_group_get_default());\n\n        lv_display_set_default(disp);\n\n        return disp;\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["6.\u5c06 ",(0,l.jsx)(n.em,{children:"lv_port_pc_vscode/nvim main/src/main.c"})," \u4e2dmain\u51fd\u6570\u4e2dwhile\u5faa\u73af\u8c03\u7528\u7684lv_timer_handler\u6539\u4e3alv_wayland_timer_handler:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-C",metastring:"showLineNumbers",children:"while(1) {\n  /* Periodically call the lv_task handler.\n   * It could be done in a timer interrupt or an OS task too.*/\n  lv_wayland_timer_handler();\n  usleep(5 * 1000);\n}\n\n"})}),"\n",(0,l.jsx)(n.p,{children:"7.\u5f00\u59cb\u7f16\u8bd1:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",metastring:"showLineNumbers",children:"cd lv_port_pc_vscode\nmkidr build\ncd build\ncmake ..\nmake\n"})}),"\n",(0,l.jsx)(n.p,{children:"8.\u7f16\u8bd1\u751f\u6210\u7269\u4f20\u8f93\u5230\u677f\u5b50\u4e2d\uff0c\u5df2 ADB \u4f20\u8f93\u4e3a\u4f8b:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",metastring:"showLineNumbers",children:"cd lv_port_pc_vscode/bin\nadb push main /opt\n"})}),"\n",(0,l.jsx)(n.p,{children:"9.\u8fde\u63a5 HDMI \u7ebf\u548c\u9f20\u6807\u952e\u76d8\uff0c\u5728 weston \u7ec8\u7aef\u4e2d\u8f93\u5165\u5982\u4e0b\uff0c\u8fd0\u884c LVGL \u7a0b\u5e8f\uff0c\u53ef\u7528\u9f20\u6807\u952e\u76d8\u63a7\u5236 UI \u754c\u9762:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",metastring:"showLineNumbers",children:"cd /opt\n./main\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:s(227).A+"",width:"960",height:"1280"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},227:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/img_v3_02gc_44d25839-f9ea-4f4f-ae1e-75894c32404g-7263090947e501efab191dd996b2b608.jpg"},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(6540);const l={},r=i.createContext(l);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);